import{a as y}from"./_astro_actions.B1Hs8mhV.js";import{e as h}from"./recaptcha.D_J8fXFO.js";const e=document.getElementById("general-form"),v=e?.querySelectorAll("input[required], textarea[required], select[required]"),i=e.querySelector("#form-steps-wrapper"),S=e.querySelector("#form-steps-next"),k=e.querySelector("#form-steps-back"),p=e.querySelector("#step-counter"),m=e.querySelector("#total-steps");let t=0,u=!1;const a=i?.children.length-1;m&&(m.textContent=String(a));e?.style.setProperty("--total-steps",String(a));e?.style.setProperty("--step",String(t+1));S?.addEventListener("click",async()=>{if(!(!i||!a||!e||!p)){if(u){t=0,f(),u=!1,e.classList.remove("error");return}if(t===0){const r=i.children[t],s=r.querySelector('input[name="firstname"]'),c=r.querySelector('input[name="email"]');if(s.checkValidity()||s.classList.add("invalid"),c.checkValidity()||c.classList.add("invalid"),!s.checkValidity()||!c.checkValidity())return;o();return}if(t===1){const r=i.children[t],s=r.querySelector("#country"),c=r.querySelector("#select-vertical"),n=r.querySelector("#select-vertical-options-hidden");if(s.checkValidity()||s.classList.add("invalid"),n&&n.children.length<1&&c.classList.add("invalid"),!s.checkValidity()||n&&n.children.length<1)return;o();const l=e.querySelector('input[name="developer_check"]'),d=e.querySelector("#conditional-input-devexperience_avalanche");l.addEventListener("change",()=>{l.checked?d?.classList.remove("disabled"):d?.classList.add("disabled")});return}if(t===2){o();return}if(t===3){e.classList.add("submit"),o();return}if(t===4){const r=i.children[t],s=r.querySelector('input[name="gdpr"]'),c=r.querySelector('input[name="marketing_consent"]');if(s.checkValidity()||s.classList.add("invalid"),c.checkValidity()||c.classList.add("invalid"),!s.checkValidity()||!c.checkValidity())return;const n=new FormData(e),l=await h();n.append("recaptchaToken",l);const{data:d}=await y.forms.general(n);d?.success?(e.classList.remove("submit"),e.classList.add("done")):(e.classList.remove("submit"),e.classList.add("error"),u=!0),o();return}}});const o=()=>{!i||!a||!e||!p||(t++,t<=a&&f())},L=()=>{!i||!a||!e||!p||(t--,t>=0&&f())};k?.addEventListener("click",()=>{u=!1,e.classList.remove("error"),L()});const f=()=>{i.style.transform=`translateX(calc((-100% - var(--gap-2xl)) * ${t}))`,t<a&&(e.style.setProperty("--step",String(t+1)),p.textContent=String(t+1))};v.forEach(r=>{r.addEventListener("input",()=>{r.checkValidity()&&r.classList.remove("invalid")})});
