import{d as i,t as h}from"./utils.CdJYMqT6.js";import{g as d}from"./index.D3jsOSc0.js";const u=document.getElementById("table-transactions");let l=0;const w=2e3,T=(t,o,e)=>{d.timeline().to(t,{opacity:0,duration:.4,delay:e*.1,ease:"power3.inOut",onComplete:()=>{t.style.opacity="0",t.textContent=o}}).to(t,{opacity:1,duration:.6,delay:.1,ease:"power3.inOut"})},C=(t,o,e)=>{d.timeline().to(t,{opacity:0,duration:.4,delay:e*.1,ease:"power3.inOut",onComplete:()=>{t.style.opacity="0",t.src=o}}).to(t,{opacity:1,duration:.6,delay:.1,ease:"power3.inOut"})},f=async()=>{try{const t=Date.now();if(t-l<w)return;l=t;const o=await fetch("/api/latest-transactions?count=7");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const e=await o.json();if(!u||!e)return;Array.from(u.children).forEach((a,n)=>{if(n<e.length){const r=e[n],p={avatar:a.querySelector(".transaction-avatar"),number:a.querySelector(".transaction-number"),time:a.querySelector(".transaction-time"),from:a.querySelector(".transaction-from"),to:a.querySelector(".transaction-to")},y={avatar:r.networkToken.logoUri,number:i(r.txHash),time:h(r.blockTimestamp),from:i(r.from.address),to:i(r.to.address)};Object.entries(y).forEach(([c,m])=>{const s=p[c];s&&(c==="avatar"?C(s,m,n):T(s,m,n))})}})}catch(t){console.error("Error fetching transactions:",t)}};window.addEventListener("fetchTransactions",f);document.addEventListener("DOMContentLoaded",()=>{setTimeout(f,1e3)});
