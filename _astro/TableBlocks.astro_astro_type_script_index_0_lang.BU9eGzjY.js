import{d as k,t as f}from"./utils.CdJYMqT6.js";import"./gsap.BHYimGvR.js";import{g as h}from"./index.D3jsOSc0.js";const u=document.querySelector("#table-blocks");let b=0;const d=2e3,w=(t,e,a)=>{h.timeline().to(t,{opacity:0,duration:.4,delay:a*.1,ease:"power3.inOut",onComplete:()=>{t.style.opacity="0",t.textContent=e}}).to(t,{opacity:1,duration:.6,delay:.1,ease:"power3.inOut"})},C=(t,e,a)=>{h.timeline().to(t,{opacity:0,duration:.4,delay:a*.1,ease:"power3.inOut",onComplete:()=>{t.style.opacity="0",t.src=e}}).to(t,{opacity:1,duration:.6,delay:.1,ease:"power3.inOut"})},m=async()=>{try{const t=Date.now();if(t-b<d)return;b=t;const e=await fetch("/api/latest-blocks?count=7");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();if(!u||!a)return;Array.from(u.children).forEach((r,s)=>{if(s<a.length){const o=a[s],y={avatar:r.querySelector(".block-avatar"),number:r.querySelector(".block-number"),time:r.querySelector(".block-time"),txCount:r.querySelector(".block-tx-count"),hash:r.querySelector(".block-hash"),symbol:r.querySelector(".block-symbol-text")},i=Number(o.feesSpent/1e19),p={avatar:o.networkToken.logoUri,number:String(o.blockNumber),time:f(o.blockTimestamp),txCount:`${o.txCount} TX`,hash:k(o.blockHash),symbol:`${i<.01?"<0.01":i.toFixed(2)} ${o.networkToken.symbol}`};Object.entries(p).forEach(([c,l])=>{const n=y[c];n&&(c==="hash"&&n.setAttribute("data-hash",o.blockHash),c==="avatar"?C(n,l,s):w(n,l,s))})}})}catch(t){console.error("Error fetching blocks:",t)}};window.addEventListener("fetchBlocks",m);document.addEventListener("DOMContentLoaded",()=>{setTimeout(m,1500)});
